<!DOCTYPE html>
<html>
<head>
  <title>Test Socket.io</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
  <h1>Test Socket.io</h1>
  <div id="logs"></div>

  <script>
    const socket = io('http://localhost:3001');

    socket.on('connect', () => {
      log('âœ… ConnectÃ© : ' + socket.id);

      // Rejoindre la room de ton userId (copie-le depuis MongoDB)
      socket.emit('joinRoom', '698df467262ec33e42561d4a');
    });

    socket.on('taskCreated', (task) => {
      log('ðŸ†• TÃ¢che crÃ©Ã©e : ' + task.title);
    });

    socket.on('taskUpdated', (task) => {
      log('âœï¸ TÃ¢che modifiÃ©e : ' + task.title);
    });

    socket.on('taskDeleted', (data) => {
      log('ðŸ—‘ï¸ TÃ¢che supprimÃ©e : ' + data.id);
    });

    socket.on('disconnect', () => {
      log('ðŸ”´ DÃ©connectÃ©');
    });

    function log(msg) {
      document.getElementById('logs').innerHTML += '<p>' + msg + '</p>';
      console.log(msg);
    }
  </script>
</body>
</html>